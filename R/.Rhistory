.libPaths()
help(Startup)
library(Rblpapi)
con=blpConnect()
tz = "America/New_York"
##don't use "EST", "EST" in R means somewhere in Eastern Canada
Sys.setenv(TZ = tz)
security="SPY Equity"
current_date=Sys.Date()
class(current_date)
str_current_date=format(current.date,'%m%d%Y')
current.date=Sys.Date()
str_current_date=format(current.date,'%m%d%Y')
current.time=Sys.time()
lookback.window=200
char.start.date=as.character(current.date-lookback.window,"%m/%d/%Y")
char.start.time=paste(char.start.date,"09:30:00")
char.end.date=as.character(current.date-1,"%m/%d/%Y")
char.end.time=paste(char.end.date,"16:15:00")
start.time=as.POSIXct(char.start.time,format='%m/%d/%Y %H:%M:%S')
end.time=as.POSIXct(char.end.time,format='%m/%d/%Y %H:%M:%S')
x_bar= getBars(security, eventType = "TRADE", barInterval = 1,
startTime = start.time, endTime = end.time)
x_bar= getBars(security, eventType = "TRADE", barInterval = 1,
startTime = start.time, endTime = end.time,con=con)
x_bar= getBars(security, eventType = "TRADE", barInterval = 1,
startTime = start.time, endTime = end.time,con= defaultConnection())
blpDisconnect(con)
con=blpConnect()
x_bar= getBars(security, eventType = "TRADE", barInterval = 1,
startTime = start.time, endTime = end.time,con= defaultConnection())
library(Rblpapi)
con=blpConnect()
tz = "America/New_York"
##don't use "EST", "EST" in R means somewhere in Eastern Canada
Sys.setenv(TZ = tz)
security="SPY Equity"
current.date=Sys.Date()
lookback.window=200
char.start.date=as.character(current.date-lookback.window,"%m/%d/%Y")
char.start.time=paste(char.start.date,"09:30:00")
char.end.date=as.character(current.date-1,"%m/%d/%Y")
char.end.time=paste(char.end.date,"16:15:00")
#char.start.time="03/25/2017 09:30:00"
#char.end.time="03/28/2018 16:15:00"
start.time=as.POSIXct(char.start.time,format='%m/%d/%Y %H:%M:%S')
end.time=as.POSIXct(char.end.time,format='%m/%d/%Y %H:%M:%S')
x_bar= getBars(security, eventType = "TRADE", barInterval = 1,
startTime = start.time, endTime = end.time,con= defaultConnection())
View(x_bar)
df.date=as.data.frame(as.Date(x_bar$times))
u.date=unique(df.date)
View(df.date)
View(u.date)
num.udays=dim(u.date)[1]
rownames(u.date)=1:num.udays
colnames(u.date)="u.date"
View(u.date)
v.time=format(x_bar$times,'%H:%M:%S')
df.price=as.data.frame(x_bar$close)
View(df.price)
newdf=cbind(df.date,df.price)
colnames(newdf)=c("date","price")
list.bar = split(newdf,f = newdf$date)
fun_abs_sum <- function(x) {
sum = 0
num.rows=length(x)
for (i in 2:num.rows) {
sum = sum + abs(x[i]-x[i-1])
}
return(sum)
}
intraday.1= sapply( list.bar , function(x) fun_abs_sum( x$price ) )
head(rownames(df.intraday.1))
head(rownames(intraday.1))
class(intrady.1)
class(intraday.1)
class(names(intraday.1))
head(names(intraday.1))
head(colnames(intraday.1))
start.date=u.date[1,1]
end.date=u.date[num.udays,1]
d.fields=c("CHG_NET_1D","LAST_PRICE")
df.day.data=bdh(security,d.fields,start.date,end.date)
interday.1=abs(df.day.data$CHG_NET_1D)
security.1 = df.day.data$LAST_PRICE
plot(1:10,ann=FALSE,type=”n”,xaxt=”n”,yaxt=”n”)
for(j in 1:4) for(i in 0:10) mtext(as.character(i),side=j,line=i)
plot(1:10,ann=FALSE,type=”n”,xaxt=”n”,yaxt=”n”)
plot(1:10,ann=FALSE,type="n",xaxt="n",yaxt="n")
for(j in 1:4) for(i in 0:10) mtext(as.character(i),side=j,line=i)
plot(u.date,intraday.1,type="l",col="red",xlab="Date")
plot(u.date,df.intraday.1,type="l",col="red",xlab="Date")
df.intraday.1 = as.data.frame(intraday.1)
plot(u.date,df.intraday.1,type="l",col="red",xlab="Date")
length(u.date)
length(df.intraday.1)
View(df.intraday.1)
plot(df.intraday.1,type="l",col="red",xlab="Date")
View(u.date)
plot(1:num.udays,df.intraday.1,type="l",col="red",xlab="Date")
View(df.intraday.1)
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",ylab="intraday.1")
df.interday.1=as.data.frame(interday.1)
View(df.interday.1)
par(new = T)
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA, cex=1.2,col="blue")
axis(side = 4) #on the right
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1')
mtext(side = 4, line = 3, 'interday.1')
par(mar = c(5,5,2,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
##use lwd for line width
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1')
mtext(side = 4, line = 1, 'interday.1')
par(mar = c(5,5,2,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2) #on the left
par(mar = c(5,5,2,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 1) #on the left
par(mar = c(5,5,2,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 2) #on the left
par(mar = c(5,5,2,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 2, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 3) #on the left
par(mar = c(2,2,2,2)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 1, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 3) #on the left
par(mar = c(5,5,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 1, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 3) #on the left
par(mar = c(5,5,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 3) #on the left
par(mar = c(5,6,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4) #on the left
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
par(mar = c(5,6,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4) #on the left
par(mar = c(5,6,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4) #on the left
par(mar = c(5,7,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4) #on the left
mtext(side = 2, line = 5)# 5 lines from the left axis
mtext(side = 2, line = 5, 'security.1')# 5 lines from the left axis
mtext(side = 2, line = 6, 'security.1')# 5 lines from the left axis
par(mar = c(5,7,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4) #on the left
mtext(side = 2, line = 6, 'security.1')# 5 lines from the left axis
par(mar = c(5,5,5,7)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 3, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 4,line = 4) #on the left
mtext(side = 4, line = 6, 'security.1')# 5 lines from the left axis
par(mar = c(5,5,5,7)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 2, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 4,line = 4) #on the left
mtext(side = 4, line = 6, 'security.1')# 5 lines from the left axis
max(security.1)
min(security.1)
plot(1:10, xaxt = "n")
axis(1, xaxp = c(2, 9, 7))
plot(1:10, xaxt = "n")
axis(1, xaxp = c(1, 9, 8))
par(mar = c(5,5,5,7)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 2, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4,xaxp = c(min(security.1), max(security.1), 5)) #on the left
mtext(side = 2, line = 6, 'security.1')# 5 lines from the left axis
par(mar = c(5,7,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 2, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4,xaxp = c(min(security.1), max(security.1), 5)) #on the left
mtext(side = 2, line = 6, 'security.1')# 5 lines from the left axis
par(mar = c(5,7,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 2, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4,xaxp = c(200, 300, 5)) #on the left
mtext(side = 2, line = 6, 'security.1')# 5 lines from the left axis
par(mar = c(5,7,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA,las = 1)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4) #on the right
mtext(side = 4, line = 2, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4) #on the left
mtext(side = 2, line = 6, 'security.1')# 5 lines from the left axis
par(mar = c(5,7,5,5)) #margin in lines on bottom, left, top and right, every line is 0.2 inch
#plot(u.date,intraday.1,type="l",col="red",xlab="Date")
##it will give errors if try to plot(u.date,df.intrady.1), have to specify the name of the column even if there is only one column
##if don't specify ylab, it will default to df.intraday.1$intraday.1
##if don't specify xlab, it will default to x1
#plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab="intraday.1")
plot(u.date,df.intraday.1$intraday.1,type="l",col="red",xlab="Date",ylab=NA,las = 1)
mtext(side = 2, line = 2, 'intraday.1') # 2 lines from the left axis
par(new = T)
#plot(u.date, interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
plot(u.date, df.interday.1$interday.1,type="l", axes=F, xlab=NA, ylab=NA,col="blue")
axis(side = 4,las = 1) #on the right
mtext(side = 4, line = 2, 'interday.1') # 3 lines from the right axis
par(new = T)
##use lwd for line width
plot(u.date, security.1,type="l", axes=F, xlab=NA, ylab=NA, lwd=2)
axis(side = 2,line = 4,las = 1) #on the left
mtext(side = 2, line = 6, 'security.1')# 5 lines from the left axis
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
library(Rbbg)
conn=blpConnect()
result=bar(conn, "RYA ID Equity", "TRADE", "2010-09-21 09:00:00.000", "2010-09-21 15:00:00.000", "60")
result=bar(conn, "SPY US Equity", "TRADE", "2010-09-21 09:00:00", "2010-09-21 15:00:00", "60")
result=bar(conn, "SPY US Equity", "TRADE", "2017-09-21 09:00:00", "2017-09-21 15:00:00", "60")
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v2.R', echo=TRUE)
View(out_newtp)
View(out_newtp2)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v3.R', echo=TRUE)
View(chg_tgt)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v3.R', echo=TRUE)
View(out_newtp)
View(out_oldtp)
View(out_newtp2)
View(chg_tgt)
chg_tgt[3]==0
out_newtp[3]!=out_oldtp[3]
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v3.R', echo=TRUE)
View(out_oldtp)
View(out_newtp2)
View(df_tgt)
single_h=bdh(conn3,"3800 HK Equity","BEST_TARGET_PRICE",char.start.date,char.end.date,override_field,override_value,always.display.tickers = TRUE)
View(single_h)
single_h=bdh(conn3,"3800 HK Equity","BEST_TARGET_PRICE",char.start.date,char.end.date,"KAY",override_value,always.display.tickers = TRUE)
single_h=bdh(conn3,"3800 HK Equity","BEST_TARGET_PRICE",char.start.date,char.end.date,override_field,"KAY",always.display.tickers = TRUE)
View(single_h)
char.end.date
end.date
View(col_date)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_v3.R', echo=TRUE)
View(out_newrating_numeric)
View(out_oldrating_numeric)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_universal_enddate.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_universal_enddate.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_universal_enddate.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_customized_enddate.R', echo=TRUE)
out_newtp[i]
out_oldtp[i]
View(out_oldtp)
is.na(out_newtp[i]
)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_customized_enddate.R', echo=TRUE)
View(out_newtp)
View(out_oldtp)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_customized_enddate.R', echo=TRUE)
source('~/git/working_dir/R/Code/analyst/analyst_alert_snapshot_universal_enddate.R', echo=TRUE)
